<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1.0">
    <title>Create a Collection</title>
</head>
<body>
    <h1>Create a New Collection</h1>

    <form action="/create-collection" method="post">
        <label for="collection_name">Collection Name:</label>
        <input type="text" name="collection_name" id="collection_name" required>

        <!-- Dynamically generated card selections: -->
        <label for="card_ids">Select Cards:</label>

        <!-- Card checkboxes will be inserted here by JavaScript -->

        <button type="submit">Create Collection</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetch('/api/card-names')
                .then(response => response.json())
                .then(cards => {
                    const form = document.querySelector('form');
                    const cardsContainer = document.createElement('div');

                    cards.forEach(card => {
                        const checkbox = document.createElement('input');
                        checkbox.type = 'checkbox';
                        checkbox.name = 'card_ids';
                        checkbox.value = card.card_id;

                        const label = document.createElement('label');
                        label.appendChild(checkbox);
                        label.append(` ${card.card_name}`);

                        const br = document.createElement('br');

                        cardsContainer.appendChild(label);
                        cardsContainer.appendChild(br);
                    });

                    form.insertBefore(cardsContainer, form.querySelector('button[type="submit"]'));
                })
                .catch(error => console.error('Error loading cards:', error));
        });
    </script>
</body>
</html>
